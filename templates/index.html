<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Monitor - BMI Predictor</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary-color: #4facfe;
        --secondary-color: #00f2fe;
        --accent-color: #0062cc;
        --dark-color: #333;
        --light-color: #f8f9fa;
        --success-color: #2ecc71;
        --warning-color: #f39c12;
        --danger-color: #e74c3c;
      }
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(
          135deg,
          var(--primary-color),
          var(--secondary-color)
        );
        color: #fff;
        min-height: 100vh;
        padding: 30px 0;
      }
      .container {
        max-width: 1000px;
        background-color: #fff;
        padding: 35px;
        border-radius: 20px;
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        color: var(--dark-color);
        margin-bottom: 30px;
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        0% {
          opacity: 0;
          transform: translateY(-10px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }
      header {
        margin-bottom: 30px;
        text-align: center;
      }
      .container h1 {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-align: center;
        margin-bottom: 15px;
        font-weight: 700;
        font-size: 2.5rem;
      }
      .header-subtitle {
        color: #666;
        font-size: 1.1rem;
        max-width: 800px;
        margin: 0 auto 25px;
      }
      .form-control,
      .form-select {
        border-radius: 12px;
        border: 1px solid #e1e1e1;
        padding: 12px 15px;
        font-size: 1rem;
        transition: all 0.3s ease;
        box-shadow: none;
      }
      .form-control:focus,
      .form-select:focus {
        border-color: var(--primary-color);
        box-shadow: 0 0 10px rgba(79, 172, 254, 0.25);
      }
      .form-label {
        font-weight: 500;
        color: #555;
        margin-bottom: 8px;
      }
      .input-group-text {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        color: #fff;
        border: none;
        border-radius: 12px 0 0 12px;
        padding: 12px 15px;
      }
      .btn-primary {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        border: none;
        padding: 14px 30px;
        font-size: 1.1rem;
        border-radius: 12px;
        transition: all 0.3s ease;
        font-weight: 500;
      }
      .btn-primary:hover {
        background: linear-gradient(
          to right,
          var(--secondary-color),
          var(--primary-color)
        );
        box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        transform: translateY(-3px);
      }
      .section-title {
        color: var(--primary-color);
        font-weight: 600;
        margin-bottom: 20px;
        font-size: 1.3rem;
        border-bottom: 2px solid #f1f1f1;
        padding-bottom: 10px;
      }
      .alert {
        border-radius: 12px;
        margin-bottom: 25px;
        padding: 18px;
        font-size: 1rem;
        border: none;
      }
      .alert-danger {
        background-color: rgba(231, 76, 60, 0.1);
        color: var(--danger-color);
        border-left: 5px solid var(--danger-color);
      }
      .alert-success {
        background-color: rgba(46, 204, 113, 0.1);
        color: var(--success-color);
        border-left: 5px solid var(--success-color);
      }
      .alert-info {
        background-color: rgba(52, 152, 219, 0.1);
        color: #3498db;
        border-left: 5px solid #3498db;
      }
      .tooltip-icon {
        color: var(--primary-color);
        font-size: 0.9rem;
        margin-left: 5px;
        cursor: pointer;
      }
      .card {
        border-radius: 15px;
        overflow: hidden;
        border: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 20px;
        transition: all 0.3s ease;
      }
      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }
      .card-header {
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
        color: white;
        font-weight: 600;
        padding: 15px 20px;
        border: none;
      }
      .card-body {
        padding: 20px;
      }
      .nav-tabs {
        border-bottom: 2px solid #f1f1f1;
        margin-bottom: 20px;
      }
      .nav-tabs .nav-link {
        border: none;
        color: #666;
        font-weight: 500;
        padding: 12px 20px;
        border-radius: 0;
        transition: all 0.3s ease;
        position: relative;
      }
      .nav-tabs .nav-link.active {
        color: var(--primary-color);
        background: none;
      }
      .nav-tabs .nav-link.active::after {
        content: "";
        position: absolute;
        bottom: -2px;
        left: 0;
        width: 100%;
        height: 2px;
        background: linear-gradient(
          to right,
          var(--primary-color),
          var(--secondary-color)
        );
      }
      .bmi-info {
        background-color: rgba(79, 172, 254, 0.05);
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 25px;
      }
      .footer {
        text-align: center;
        color: white;
        margin-top: 20px;
        font-size: 0.9rem;
      }
      .footer a {
        color: white;
        text-decoration: none;
        font-weight: 500;
      }
      .footer a:hover {
        text-decoration: underline;
      }
      .form-floating .form-control {
        height: calc(3.5rem + 2px);
        line-height: 1.25;
        padding: 1rem 0.75rem;
      }
      .form-floating label {
        padding: 1rem 0.75rem;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <h1><i class="fas fa-heartbeat"></i> Health Monitor</h1>
        <p class="header-subtitle">
          Dapatkan prediksi BMI dan rekomendasi kesehatan yang disesuaikan
          dengan profil Anda. Isi formulir di bawah ini untuk mendapatkan
          insight tentang kondisi kesehatan Anda.
        </p>
      </header>

      <!-- Flash Messages -->
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        class="alert alert-{{ category }} alert-dismissible fade show"
        role="alert"
      >
        <i
          class="fas {% if category == 'danger' %}fa-exclamation-circle{% elif category == 'success' %}fa-check-circle{% else %}fa-info-circle{% endif %} me-2"
        ></i>
        {{ message }}
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="alert"
          aria-label="Close"
        ></button>
      </div>
      {% endfor %} {% endif %} {% endwith %}

      <!-- BMI Information Card -->
      <div class="bmi-info">
        <h5><i class="fas fa-info-circle me-2"></i> Apa itu BMI?</h5>
        <p>
          Body Mass Index (BMI) adalah ukuran yang digunakan untuk menilai
          apakah seseorang memiliki berat badan yang sehat berdasarkan tinggi
          dan berat badannya. BMI dihitung dengan membagi berat badan dalam
          kilogram dengan kuadrat tinggi badan dalam meter.
        </p>
        <div class="row text-center">
          <div class="col-md-3">
            <div class="card bg-primary bg-opacity-10">
              <div class="card-body">
                <h6 style="color: #3498db">Underweight</h6>
                <p class="mb-0"><small>&lt; 18.5</small></p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card bg-success bg-opacity-10">
              <div class="card-body">
                <h6 style="color: #2ecc71">Normal</h6>
                <p class="mb-0"><small>18.5 - 24.9</small></p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card bg-warning bg-opacity-10">
              <div class="card-body">
                <h6 style="color: #f39c12">Overweight</h6>
                <p class="mb-0"><small>25 - 29.9</small></p>
              </div>
            </div>
          </div>
          <div class="col-md-3">
            <div class="card bg-danger bg-opacity-10">
              <div class="card-body">
                <h6 style="color: #e74c3c">Obese</h6>
                <p class="mb-0"><small>&gt; 30</small></p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <form method="POST" action="{{ url_for('predict') }}" id="bmiForm">
        <ul class="nav nav-tabs" id="formTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="personal-tab"
              data-bs-toggle="tab"
              data-bs-target="#personal"
              type="button"
              role="tab"
              aria-controls="personal"
              aria-selected="true"
            >
              <i class="fas fa-user me-2"></i>Data Pribadi
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="physical-tab"
              data-bs-toggle="tab"
              data-bs-target="#physical"
              type="button"
              role="tab"
              aria-controls="physical"
              aria-selected="false"
            >
              <i class="fas fa-heartbeat me-2"></i>Data Fisik
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="workout-tab"
              data-bs-toggle="tab"
              data-bs-target="#workout"
              type="button"
              role="tab"
              aria-controls="workout"
              aria-selected="false"
            >
              <i class="fas fa-dumbbell me-2"></i>Data Latihan
            </button>
          </li>
        </ul>

        <div class="tab-content" id="formTabContent">
          <!-- Tab Pertama: Data Pribadi -->
          <div
            class="tab-pane fade show active"
            id="personal"
            role="tabpanel"
            aria-labelledby="personal-tab"
          >
            <h4 class="section-title">Data Pribadi</h4>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Age" class="form-label">Usia (tahun)</label>
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-calendar"></i
                    ></span>
                    <input
                      type="number"
                      step="1"
                      min="12"
                      max="100"
                      class="form-control"
                      id="Age"
                      name="Age"
                      required
                      placeholder="Masukkan usia Anda"
                    />
                  </div>
                  <small class="form-text text-muted"
                    >Usia antara 12-100 tahun</small
                  >
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Gender" class="form-label">Jenis Kelamin</label>
                  <select
                    class="form-select"
                    id="Gender"
                    name="Gender"
                    required
                  >
                    <option value="">Pilih Jenis Kelamin</option>
                    <option value="Female">Perempuan</option>
                    <option value="Male">Laki-laki</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Weight" class="form-label"
                    >Berat Badan (kg)</label
                  >
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-weight"></i
                    ></span>
                    <input
                      type="number"
                      step="0.1"
                      min="30"
                      max="300"
                      class="form-control"
                      id="Weight"
                      name="Weight"
                      required
                      placeholder="Masukkan berat badan"
                    />
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Height" class="form-label"
                    >Tinggi Badan (m)</label
                  >
                  <div class="input-group">
                    <span class="input-group-text"
                      ><i class="fas fa-ruler-vertical"></i
                    ></span>
                    <input
                      type="number"
                      step="0.01"
                      min="1"
                      max="2.5"
                      class="form-control"
                      id="Height"
                      name="Height"
                      required
                      placeholder="Masukkan tinggi badan"
                    />
                  </div>
                  <small class="form-text text-muted"
                    >Contoh: 1.65 untuk tinggi 165 cm</small
                  >
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-end mt-4">
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextTab('physical-tab')"
              >
                Selanjutnya <i class="fas fa-arrow-right ms-2"></i>
              </button>
            </div>
          </div>

          <!-- Tab Kedua: Data Fisik -->
          <div
            class="tab-pane fade"
            id="physical"
            role="tabpanel"
            aria-labelledby="physical-tab"
          >
            <h4 class="section-title">Data Kesehatan Fisik</h4>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Max_BPM" class="form-label"
                    >Detak Jantung Maksimum (BPM)</label
                  >
                  <input
                    type="number"
                    step="1"
                    min="100"
                    max="220"
                    class="form-control"
                    id="Max_BPM"
                    name="Max_BPM"
                    required
                    placeholder="Detak jantung maksimum"
                  />
                  <small class="form-text text-muted"
                    >Detak jantung tertinggi saat berolahraga</small
                  >
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Avg_BPM" class="form-label"
                    >Detak Jantung Rata-rata (BPM)</label
                  >
                  <input
                    type="number"
                    step="1"
                    min="60"
                    max="200"
                    class="form-control"
                    id="Avg_BPM"
                    name="Avg_BPM"
                    required
                    placeholder="Detak jantung rata-rata"
                  />
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Resting_BPM" class="form-label"
                    >Detak Jantung Istirahat (BPM)</label
                  >
                  <input
                    type="number"
                    step="1"
                    min="40"
                    max="100"
                    class="form-control"
                    id="Resting_BPM"
                    name="Resting_BPM"
                    required
                    placeholder="Detak jantung istirahat"
                  />
                  <small class="form-text text-muted"
                    >Detak jantung saat istirahat total</small
                  >
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Fat_Percentage" class="form-label"
                    >Persentase Lemak (%)</label
                  >
                  <input
                    type="number"
                    step="0.1"
                    min="3"
                    max="50"
                    class="form-control"
                    id="Fat_Percentage"
                    name="Fat_Percentage"
                    required
                    placeholder="Persentase lemak tubuh"
                  />
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Water_Intake" class="form-label"
                    >Konsumsi Air (liter/hari)</label
                  >
                  <input
                    type="number"
                    step="0.1"
                    min="0.5"
                    max="7"
                    class="form-control"
                    id="Water_Intake"
                    name="Water_Intake"
                    required
                    placeholder="Konsumsi air per hari"
                  />
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between mt-4">
              <button
                type="button"
                class="btn btn-outline-primary"
                onclick="nextTab('personal-tab')"
              >
                <i class="fas fa-arrow-left me-2"></i> Sebelumnya
              </button>
              <button
                type="button"
                class="btn btn-primary"
                onclick="nextTab('workout-tab')"
              >
                Selanjutnya <i class="fas fa-arrow-right ms-2"></i>
              </button>
            </div>
          </div>

          <!-- Tab Ketiga: Data Latihan -->
          <div
            class="tab-pane fade"
            id="workout"
            role="tabpanel"
            aria-labelledby="workout-tab"
          >
            <h4 class="section-title">Data Latihan</h4>
            <div class="row">
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Workout_Type" class="form-label"
                    >Jenis Latihan</label
                  >
                  <select
                    class="form-select"
                    id="Workout_Type"
                    name="Workout_Type"
                    required
                  >
                    <option value="">Pilih Jenis Latihan</option>
                    <option value="Yoga">Yoga</option>
                    <option value="HIIT">
                      HIIT (High Intensity Interval Training)
                    </option>
                    <option value="Cardio">Kardio</option>
                    <option value="Strength">Latihan Kekuatan</option>
                  </select>
                </div>
              </div>
              <div class="col-md-6">
                <div class="mb-3">
                  <label for="Experience_Level" class="form-label"
                    >Level Pengalaman (1-3)</label
                  >
                  <select
                    class="form-select"
                    id="Experience_Level"
                    name="Experience_Level"
                    required
                  >
                    <option value="">Pilih Level Pengalaman</option>
                    <option value="1">Pemula (1)</option>
                    <option value="2">Menengah (2)</option>
                    <option value="3">Mahir (3)</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Session_Duration" class="form-label"
                    >Durasi Sesi (jam)</label
                  >
                  <input
                    type="number"
                    step="0.01"
                    min="0.25"
                    max="5"
                    class="form-control"
                    id="Session_Duration"
                    name="Session_Duration"
                    required
                    placeholder="Durasi latihan"
                  />
                  <small class="form-text text-muted"
                    >Durasi rata-rata per sesi latihan</small
                  >
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Calories_Burned" class="form-label"
                    >Kalori Terbakar</label
                  >
                  <input
                    type="number"
                    step="1"
                    min="50"
                    max="2000"
                    class="form-control"
                    id="Calories_Burned"
                    name="Calories_Burned"
                    required
                    placeholder="Kalori yang terbakar"
                  />
                  <small class="form-text text-muted"
                    >Kalori yang terbakar per sesi latihan</small
                  >
                </div>
              </div>
              <div class="col-md-4">
                <div class="mb-3">
                  <label for="Workout_Frequency" class="form-label"
                    >Frekuensi Latihan (hari/minggu)</label
                  >
                  <input
                    type="number"
                    step="1"
                    min="1"
                    max="7"
                    class="form-control"
                    id="Workout_Frequency"
                    name="Workout_Frequency"
                    required
                    placeholder="Frekuensi latihan"
                  />
                </div>
              </div>
            </div>
            <div class="d-flex justify-content-between mt-4">
              <button
                type="button"
                class="btn btn-outline-primary"
                onclick="nextTab('physical-tab')"
              >
                <i class="fas fa-arrow-left me-2"></i> Sebelumnya
              </button>
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-calculator me-2"></i> Prediksi BMI
              </button>
            </div>
          </div>
        </div>
      </form>
    </div>

    <div class="footer">
      <p>
        &copy; 2023 Health Monitor |
        <a href="{{ url_for('about') }}">Tentang Aplikasi</a>
      </p>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script>
      // Fungsi untuk navigasi antar tab
      function nextTab(tabId) {
        document.getElementById(tabId).click();
      }

      // Enable tooltips
      document.addEventListener("DOMContentLoaded", function () {
        var tooltipTriggerList = [].slice.call(
          document.querySelectorAll('[data-bs-toggle="tooltip"]')
        );
        var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
          return new bootstrap.Tooltip(tooltipTriggerEl);
        });

        // Auto-close alert after 5 seconds
        setTimeout(function () {
          var alerts = document.querySelectorAll(".alert");
          alerts.forEach(function (alert) {
            var bsAlert = new bootstrap.Alert(alert);
            bsAlert.close();
          });
        }, 5000);
      });

      // Form validation
      document
        .getElementById("bmiForm")
        .addEventListener("submit", function (event) {
          var form = event.target;

          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }

          form.classList.add("was-validated");
        });
    </script>
  </body>
</html>
